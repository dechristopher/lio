<!-- Creator:
				Waits with socket open to listen for game ready message. When message
				is received, the page refreshes and creator is brought to game screen
				without further interaction. Game then begins.

				Shows invite link to send to opponent.
				Shows cancel button to terminate game before start.
	-->
<div class="chin" style="padding-top: 12px">
	<i id="challengeTitle">Challenge to a game</i>
	<div class="sm center">
		<div id="creator">
			{{ template "partials/game_info" . }}
			<div id="gameInviteLinkContainer">
				<label class="prose" for="gameInviteLink">To invite someone to play, share this URL:</label>
				<div id="inviteContainer">
					<input type="text" id="gameInviteLink" onClick="this.select();"
								 value="{{ .SiteURL }}{{ .Data.RoomID }}" readonly/>
					<input type="button" id="copyInviteButton" class="cgbtn libtn" title="Copy invite URL"/>
				</div>
				<p class="prose">Anyone that comes to this URL can choose to play with you.</p>
			</div>
			<form class="contents" method="post" action="/{{ .Data.RoomID }}/cancel">
				<input type="hidden" name="cancel_token" value="{{ .Data.CancelToken }}"/>
				<input type="submit" id="cancelGameButton" class="cgbtn libtn" title="Cancel the game"
							 value="&times; CANCEL GAME"/>
			</form>
		</div>
	</div>
</div>
<div id="ws-path" class="hidden" data-config="{{ .Data.RoomID }}"></div>
<style>
	#challengeTitle {
		margin-block-start: 8px;
	}

	#creator {
		display: flex;
		flex-direction: column;
		padding: 16px;
		width: 275px;
	}

	#gameInviteLinkContainer {
		margin-top: 8px;
		padding-top: 1em;
	}

	#inviteContainer {
		display: flex;
		flex-direction: row;
	}

	#gameInviteLink {
		border: 1px solid #404040;
		padding: 0.6em 1em;
		margin-right: 8px;
		flex: 2;

		text-align: center;
		font-size: 12px;
		font-weight: 600;
		min-height: 1.8em;
	}

	#copyInviteButton {
		float: right;
		min-height: 1.8em;
		min-width: 2.5em;
		background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIFVwbG9hZGVkIHRvIFNWR1JlcG8gaHR0cHM6Ly93d3cuc3ZncmVwby5jb20gLS0+CiAgICA8dGl0bGU+aWNfZmx1ZW50X2NvcHlfbGlua18yNF9maWxsZWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i8J+UjS1Qcm9kdWN0LUljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iaWNfZmx1ZW50X2NvcHlfbGlua18yNF9maWxsZWQiIGZpbGw9IiMyMTIxMjEiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NTMzNDgxLDYuNDkzMzAzODMgTDEwLjI0NjY1MTksNi40OTMzMDM4MyBDOS40Njk4ODU4Nyw2LjQ5MzMwMzgzIDguNzg1MTkwOTgsNi4wOTkxMDAzNCA4LjM4MTcwOTUyLDUuNDk5ODM1NjMgTDYuMjUsNS41IEM1Ljg3MDMwNDIzLDUuNSA1LjU1NjUwOTA0LDUuNzgyMTUzODggNS41MDY4NDY2Miw2LjE0ODIyOTQ0IEw1LjUsNi4yNSBMNS41LDE5Ljc1NDU5MSBDNS41LDIwLjEzNDI4NjggNS43ODIxNTM4OCwyMC40NDgwODIgNi4xNDgyMjk0NCwyMC40OTc3NDQ0IEw2LjM1MTc3MDU2LDIwLjUxMTQzNzYgQzYuNzE3ODQ2MTIsMjAuNTYxMSA3LDIwLjg3NDg5NTIgNywyMS4yNTQ1OTEgQzcsMjEuNjY4ODA0NiA2LjY2NDIxMzU2LDIyLjAwNDU5MSA2LjI1LDIyLjAwNDU5MSBDNS4wNTkxMzYwMSwyMi4wMDQ1OTEgNC4wODQzNTUwOCwyMS4wNzk0Mjk0IDQuMDA1MTkwODEsMTkuOTA4NjM5OCBMNCwxOS43NTQ1OTEgTDQsNi4yNSBDNCw1LjA1OTEzNjAxIDQuOTI1MTYxNTksNC4wODQzNTUwOCA2LjA5NTk1MTE5LDQuMDA1MTkwODEgTDYuMjUsNCBMOC4wMTM0NDM5NSwzLjk5OTQ1ODcgQzguMTM2NTExOTYsMi44NzQ5NzMxIDkuMDg5NDAxNDgsMiAxMC4yNDY2NTE5LDIgTDEzLjc1MzM0ODEsMiBDMTQuOTEwNTk4NSwyIDE1Ljg2MzQ4OCwyLjg3NDk3MzEgMTUuOTg2NTU2MSwzLjk5OTQ1ODcgTDE3Ljc1LDQgQzE4Ljk0MDg2NCw0IDE5LjkxNTY0NDksNC45MjUxNjE1OSAxOS45OTQ4MDkyLDYuMDk1OTUxMTkgTDIwLDYuMjUgTDIwLDExLjc1NDI1IEMyMCwxMi4xNjg0NjM1IDE5LjY2NDIxMzYsMTIuNTA0MjUgMTkuMjUsMTIuNTA0MjUgQzE4Ljg3MDMwNDIsMTIuNTA0MjUgMTguNTU2NTA5LDEyLjIyMjA5NjEgMTguNTA2ODQ2NiwxMS44NTYwMjA1IEwxOC41LDExLjc1NDI1IEwxOC41LDYuMjUgQzE4LjUsNS44NzAzMDQyMyAxOC4yMTc4NDYxLDUuNTU2NTA5MDQgMTcuODUxNzcwNiw1LjUwNjg0NjYyIEwxNy43NSw1LjUgTDE1LjYxODI5MDUsNS40OTk4MzU2MyBDMTUuMjE0ODA5LDYuMDk5MTAwMzQgMTQuNTMwMTE0MSw2LjQ5MzMwMzgzIDEzLjc1MzM0ODEsNi40OTMzMDM4MyBaIE0xNi45OTk5OTk4LDEzLjk5NzUyNTcgTDE3Ljk5OTk5OTgsMTMuOTk3NTI1NyBDMjAuMjA5MTM5LDEzLjk5NzUyNTcgMjEuOTk5OTk5OCwxNS43ODgzODY3IDIxLjk5OTk5OTgsMTcuOTk3NTI1NyBDMjEuOTk5OTk5OCwyMC4xMzk3MjExIDIwLjMxNjAzMTUsMjEuODg4NjA0NiAxOC4yMDM4MjY1LDIxLjk5MjYyMDggTDE4LjAwNDU5MSwyMS45OTc1MTUxIEwxNy4wMDQ1OTEsMjIuMDAyMTI3NiBDMTYuNDUyMzEyLDIyLjAwNDY0MTcgMTYuMDAyNTQ2MSwyMS41NTg5ODY2IDE1Ljk5OTk4OTEsMjEuMDA2NzA3NiBDMTUuOTk3NjU1NCwyMC40OTM4NzcyIDE2LjM4MTc1MTcsMjAuMDY5NDM4IDE2Ljg3ODgyLDIwLjAwOTM5MDMgTDE2Ljk5NTQwOSwyMC4wMDIxMjcyIEwxNy45OTk5OTk4LDE5Ljk5NzUyNTcgQzE5LjEwNDU2OTUsMTkuOTk3NTI1NyAxOS45OTk5OTk4LDE5LjEwMjA5NTIgMTkuOTk5OTk5OCwxNy45OTc1MjU3IEMxOS45OTk5OTk4LDE2Ljk0MzE2MzkgMTkuMTg0MTIyMiwxNi4wNzkzNjA2IDE4LjE0OTI2MjEsMTYuMDAzMDExNCBMMTcuOTk5OTk5OCwxNS45OTc1MjU3IEwxNi45OTk5OTk4LDE1Ljk5NzUyNTcgQzE2LjQ0NzcxNTMsMTUuOTk3NTI1NyAxNS45OTk5ODkxLDE1LjU0OTgxMDQgMTUuOTk5OTg5MSwxNC45OTc1MjU3IEMxNS45OTk5ODkxLDE0LjQ4NDY4OTggMTYuMzg2MDQwMiwxNC4wNjIwMTg1IDE2Ljg4MzM3ODcsMTQuMDA0MjUzNCBMMTYuOTk5OTk5OCwxMy45OTc1MjU3IEwxNy45OTk5OTk4LDEzLjk5NzUyNTcgTDE2Ljk5OTk5OTgsMTMuOTk3NTI1NyBaIE0xMi41LDE0LjAwMjExNjcgTDEzLjUsMTQuMDAyMTE2NyBDMTQuMDUyMjg0NywxNC4wMDIxMTY3IDE0LjUsMTQuNDQ5ODMxOSAxNC41LDE1LjAwMjExNjcgQzE0LjUsMTUuNTE0OTUyNSAxNC4xMTM5NTk4LDE1LjkzNzYyMzggMTMuNjE2NjIxMSwxNS45OTUzODg5IEwxMy41LDE2LjAwMjExNjcgTDEyLjUsMTYuMDAyMTE2NyBDMTEuMzk1NDMwNSwxNi4wMDIxMTY3IDEwLjUsMTYuODk3NTQ3MiAxMC41LDE4LjAwMjExNjcgQzEwLjUsMTkuMDU2NDc4NSAxMS4zMTU4Nzc4LDE5LjkyMDI4MTggMTIuMzUwNzM3NywxOS45OTY2MzA5IEwxMi41LDIwLjAwMjExNjcgTDEzLjUsMjAuMDAyMTE2NyBDMTQuMDUyMjg0NywyMC4wMDIxMTY3IDE0LjUsMjAuNDQ5ODMxOSAxNC41LDIxLjAwMjExNjcgQzE0LjUsMjEuNTE0OTUyNSAxNC4xMTM5NTk4LDIxLjkzNzYyMzggMTMuNjE2NjIxMSwyMS45OTUzODg5IEwxMy41LDIyLjAwMjExNjcgTDEyLjUsMjIuMDAyMTE2NyBDMTAuMjkwODYxLDIyLjAwMjExNjcgOC41LDIwLjIxMTI1NTcgOC41LDE4LjAwMjExNjcgQzguNSwxNS44NTk5MjEzIDEwLjE4Mzk2ODUsMTQuMTExMDM3OCAxMi4zMDAzNTk3LDE0LjAwNzAxMiBMMTIuNSwxNC4wMDIxMTY3IEwxMy41LDE0LjAwMjExNjcgTDEyLjUsMTQuMDAyMTE2NyBaIE0xMi40OTg1NjE0LDE2Ljk5OTgyMTIgTDE4LDE2Ljk5OTgyMTIgQzE4LjU1MjI4NDcsMTYuOTk5ODIxMiAxOSwxNy40NDc1MzY0IDE5LDE3Ljk5OTgyMTIgQzE5LDE4LjUxMjY1NyAxOC42MTM5NTk4LDE4LjkzNTMyODMgMTguMTE2NjIxMSwxOC45OTMwOTM0IEwxOCwxOC45OTk4MjEyIEwxMi40OTg1NjE0LDE4Ljk5OTgyMTIgQzExLjk0NjI3NjcsMTguOTk5ODIxMiAxMS40OTg1NjE0LDE4LjU1MjEwNTkgMTEuNDk4NTYxNCwxNy45OTk4MjEyIEMxMS40OTg1NjE0LDE3LjQ4Njk4NTMgMTEuODg0NjAxNiwxNy4wNjQzMTQgMTIuMzgxOTQwMywxNy4wMDY1NDg5IEwxMi40OTg1NjE0LDE2Ljk5OTgyMTIgTDE4LDE2Ljk5OTgyMTIgTDEyLjQ5ODU2MTQsMTYuOTk5ODIxMiBaIE0xMy43NTMzNDgxLDMuNSBMMTAuMjQ2NjUxOSwzLjUgQzkuODM0Mjg3NDUsMy41IDkuNSwzLjgzNDI4NzQ1IDkuNSw0LjI0NjY1MTkxIEM5LjUsNC42NTkwMTYzOCA5LjgzNDI4NzQ1LDQuOTkzMzAzODMgMTAuMjQ2NjUxOSw0Ljk5MzMwMzgzIEwxMy43NTMzNDgxLDQuOTkzMzAzODMgQzE0LjE2NTcxMjYsNC45OTMzMDM4MyAxNC41LDQuNjU5MDE2MzggMTQuNSw0LjI0NjY1MTkxIEMxNC41LDMuODM0Mjg3NDUgMTQuMTY1NzEyNiwzLjUgMTMuNzUzMzQ4MSwzLjUgWiIgaWQ9IvCfjqgtQ29sb3IiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==");
		background-repeat: no-repeat;
		background-position: center;
		background-color: #a8e4ee;
	}

	.copied {
		background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjQwNS4yNzJweCIgaGVpZ2h0PSI0MDUuMjcycHgiIHZpZXdCb3g9IjAgMCA0MDUuMjcyIDQwNS4yNzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQwNS4yNzIgNDA1LjI3MjsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTM5My40MDEsMTI0LjQyNUwxNzkuNjAzLDMzOC4yMDhjLTE1LjgzMiwxNS44MzUtNDEuNTE0LDE1LjgzNS01Ny4zNjEsMEwxMS44NzgsMjI3LjgzNg0KCQljLTE1LjgzOC0xNS44MzUtMTUuODM4LTQxLjUyLDAtNTcuMzU4YzE1Ljg0MS0xNS44NDEsNDEuNTIxLTE1Ljg0MSw1Ny4zNTUtMC4wMDZsODEuNjk4LDgxLjY5OUwzMzYuMDM3LDY3LjA2NA0KCQljMTUuODQxLTE1Ljg0MSw0MS41MjMtMTUuODI5LDU3LjM1OCwwQzQwOS4yMyw4Mi45MDIsNDA5LjIzLDEwOC41NzgsMzkzLjQwMSwxMjQuNDI1eiIvPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=") !important;
		background-size: 20px;
		background-color: #afeea8 !important;
	}

	#cancelGameButton {
		background-color: #FF6565;
	}
</style>
<script>
	window.addEventListener('load', () => {
	  if (window.ws) {
		  return false;
	  }

	  // connect to waiting room
	  connect("wait");

	  // in case we miss the redirect broadcast, request
	  // updates from the room to redirect us to the game
	  // when it is ready
	  setInterval(() => {
		  requestRoomUpdate();
	  }, 5000);
	});
</script>
